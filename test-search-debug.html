<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Recherche Netflix</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            background: #141414;
            color: white;
            font-family: 'Helvetica Neue', Arial, sans-serif;
            padding: 2rem;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .test-search {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        .debug-info {
            background: #000;
            padding: 1rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
            color: #00ff00;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîç Test de Recherche Netflix</h1>
        
        <div class="test-search">
            <h2>Barre de recherche</h2>
            <div class="search-container">
                <input type="text" class="search-input active" placeholder="Tapez 'batman', 'avengers', 'breaking'..." id="searchInput">
                <button class="search-btn" id="searchBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20">
                        <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                </button>
                <div class="search-dropdown" id="searchDropdown">
                    <!-- Les r√©sultats appara√Ætront ici -->
                </div>
            </div>
        </div>
        
        <div class="debug-info" id="debugInfo">
            <h3>Logs de debug:</h3>
            <div id="debugOutput">En attente...</div>
        </div>
        
        <button onclick="testAPI()" style="background: #e50914; color: white; border: none; padding: 10px 20px; margin: 10px; border-radius: 4px; cursor: pointer;">Test API Direct</button>
        <button onclick="clearDebug()" style="background: #333; color: white; border: none; padding: 10px 20px; margin: 10px; border-radius: 4px; cursor: pointer;">Effacer Debug</button>
    </div>
    
    <!-- Scripts -->
    <script src="api.js"></script>
    <script src="search.js"></script>
    <script>
        // Override console.log pour afficher dans la page
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        function addDebugMessage(type, message) {
            const output = document.getElementById('debugOutput');
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? '#ff4444' : type === 'warn' ? '#ffaa44' : '#00ff00';
            output.innerHTML += `<div style="color: ${color};">[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addDebugMessage('log', args.join(' '));
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addDebugMessage('error', '‚ùå ' + args.join(' '));
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addDebugMessage('warn', '‚ö†Ô∏è ' + args.join(' '));
        };
        
        // Test API direct
        async function testAPI() {
            addDebugMessage('log', 'üß™ Test API direct...');
            try {
                const apiKey = 'e4b90327227c88daac14c0bd0c1f93cd';
                const response = await fetch(
                    `https://api.themoviedb.org/3/search/multi?api_key=${apiKey}&query=batman&language=fr&page=1`
                );
                
                addDebugMessage('log', `üì° R√©ponse API: ${response.status}`);
                
                if (response.ok) {
                    const data = await response.json();
                    addDebugMessage('log', `üìä ${data.results.length} r√©sultats trouv√©s`);
                    
                    if (data.results.length > 0) {
                        addDebugMessage('log', `Premier r√©sultat: ${data.results[0].title || data.results[0].name}`);
                    }
                } else {
                    addDebugMessage('error', `Erreur HTTP: ${response.status}`);
                }
                
            } catch (error) {
                addDebugMessage('error', `Erreur: ${error.message}`);
            }
        }
        
        function clearDebug() {
            document.getElementById('debugOutput').innerHTML = 'Logs effac√©s...';
        }
        
        // Test au chargement
        window.addEventListener('load', () => {
            addDebugMessage('log', 'üöÄ Page de test charg√©e');
            addDebugMessage('log', '‚úÖ Recherche initialis√©e');
        });
    </script>
</body>
</html>